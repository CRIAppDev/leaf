{
  "Runtime": {
    "Mode": "FULL"
  },
  "Jwt": {
    "SigningKey": "LEAF_JWT_KEY",
    "Password": "LEAF_JWT_KEY_PW",
    "Certificate": "LEAF_JWT_CERT",
    "Issuer": "urn:leaf:iss:dev.leaf.tld"
  },
  "Db": {
    "App": {
      "Connection": "LEAF_APP_DB",
      "DefaultTimeout": 60
    },
    "Clin": {
      "Connection": "LEAF_CLIN_DB",
      "DefaultTimeout": 180,
      "Cohort": {
        "QueryStrategy": "PARALLEL",
        "MaxParallelThreads": 5
      }
    }
  },
  "Authentication": {
    "Mechanism": "UNSECURED",
    "SessionTimeoutMinutes": 480,
    "InactivityTimeoutMinutes": 20,
    "Logout": {
      "Enabled": true,
      "URI": "https://www.github.com"
    },
      "SAML2": {
        "Headers": {
          "ScopedIdentity": "eppn"
        }
      }
    },
  "Authorization": {
    "Mechanism": "UNSECURED",
    "SAML2": {
      "HeadersMapping": {
        "Entitlements": {
          "Name": "gws-groups",
          "Delimiter": ";"
        }
      },
      "RolesMapping": {
        "User": "urn:mace:users",
        "Super": "urn:mace:supers",
        "Identified": "urn:mace:phi",
        "Admin": "urn:mace:sudos",
        "Federated": "urn:mace:federated"
      }
    }
  },
  "Attestation": {
    "Enabled": true,
    "Type":  "HTML",
    "Text": [
      "<b>By logging in you agree to the following:</b>",
      "<p style='margin-left: 20px'>For Human Subjects research uses, I certify that I have completed Mount Sinai training required by the Program for Protection of Human Subjects, and agree to abide by all PPHS requirements pertaining to access, storage, sharing and review of data.<br>I will limit my review of data elements in the Data Warehouse, or any Datamarts, to only those data elements and date ranges in the scope of my IRB approved project, or for authorized Hospital uses as necessary to carry out my job responsibilities.<br>For any custom reports or datasets that I request, I will limit my request to only those data elements and date ranges in the scope of my IRB application and approval, or for authorized Hospital uses as necessary to carry out my job responsibilities.<br>A De-identified Data Set with the following limitations:<br></p>",
      "<ul><li>Patients with an age of 89 and older are masked with a value of 'Greater than 89'.</li><li>Cohorts less than 10 are masked with a value of 'Less than 10'.</li><li>Dates in the dataset are shifted equally per patient based on the date shift value. This ensures that the relative distance between dates in the patients' chronology remains intact.</li></ul>",
      "<p style='margin-left: 20px'>When using data provided without identifiers for research purposes I will not attempt to re-identify patients from any data that I may see in the Data Warehouse or any Datamarts or reports. This restriction applies to all uses, including data being used in preparation of a project, or for purposes of research that is considered not federal regulated human subjects research.<br>For any identified (i.e., containing PHI) Datamarts, data sets or reports made available to me, I will exclude any subjects personally known to me or co-investigators except in a formal provider/patient relationship.<br>Data supplied for projects with IRB approval shall not be re-used or re-disclosed without explicit permission from the IRB.<br>I certify that I understand and agree to abide by the guidelines of the PPHS, the rules and regulations of the Mount Sinai Medical Center, and all applicable federal and state laws and regulations.<br>I understand that all access is audited, and that unauthorized access or inappropriate usage of data may result in disciplinary action up to and including termination.<br></p>"
    ]
  },
  "Compiler": {
    "Alias": "@",
    "FieldPersonId": "person_id",
    "FieldEncounterId": "visit_occurrence_id"
  },
  "Cohort": {
    "RowLimit": 200000,
    "ExportLimit": 5000
  },
  "Export": {
    "REDCap": {
      "Enabled": false,
      "ApiURI": "https://redcap.example.edu/api/",
      "BatchSize": 10,
      "RowLimit": 5000,
      "Scope": "washington.edu",
      "SuperToken": "LEAF_REDCAP_SUPERTOKEN",
      "IncludeScopeInUsername": true
    },
    "CSV": {
      "Enabled": true
    }
  },
  "Import": {
    "REDCap": {
      "Enabled": false,
      "ApiURI": "https://redcap.example.edu/api/",
      "BatchSize": 1000
    }
  },
  "Deidentification": {
    "Patient": {
      "Enabled": true,
      "DateShifting": {
        "Increment": "DAY",
        "LowerBound": -365,
        "UpperBound": 365
      }
    },
    "Cohort": {
      "Enabled": false,
      "Noise": {
        "Enabled": false,
        "LowerBound": -10,
        "UpperBound": 10
      },
      "LowCellSizeMasking": {
        "Enabled": false,
        "Threshold": 10
      }
    }
  },
  "Client": {
    "Map": {
      "Enabled": true,
      "TileURI": "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"
    },
    "Visualize": {
      "Enabled": true,
      "ShowFederated": false
    },
    "Timelines": {
      "Enabled":  true
    },
    "PatientList": {
      "Enabled": true
    },
    "Help": {
      "Enabled": true,
      "Email": "leaf-support@example.edu",
      "URI": "https://www.example.edu/leaf-faq"
    }
  },
  "Notification": {
    "Enabled": false,
    "Email": {
      "Server": "server",
      "UseSSL": true,
      "Sender": {
        "Address": "sender@u.edu"
      },
      "Receiver": {
        "Address": "receiver@u.edu"
      },
      "Credentials": {
        "Username": "LEAF_SMTP_USR",
        "Password": "LEAF_SMTP_PW"
      }
    }
  }
}